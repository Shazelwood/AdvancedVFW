// var map = require('RemoteData');
//Creating Database
var dataB = Ti.Database.open('GeoDB');
//var wowData = Ti.App.Properties.getString('geoData');
dataB.execute('CREATE TABLE IF NOT EXISTS location (id INTEGER PRIMARY KEY, name TEXT, population TEXT, lng INTEGER, lat INTEGER, dist TEXT, county TEXT)');

//Inserting data from save func start
function insertData() {
	var data = [];

	var  secInfo = geo.execute('SELECT * FROM location');

	while (secInfo.isValidRow()) {
		var name = secInfo.fieldByName('name');
		var st = secInfo.fieldByName('st');
		var county = rowInfo.fieldByName('county');
		var country = rowInfo.fieldByName('country');
		var latitude = secInfo.fieldByName('latitude');
		var longitude = secInfo.fieldByName('longitude');
		var dist = rowInfo.fieldByName('dist');
		var id = secInfo.fieldByName('id');
		
		data.push({
			name : name,
			st : st,
			county : county,
			country : country,
			latitude : latitude,
			longitude : longitude,
			dist : dist,
			id : id
		});

		Ti.API.info('=========================');

		secInfo.next();
	};
	return data;
};
var geoData = insertData();
exports.geoData = geoData;
//Inserting data from sav func end


//saving data from app.js start
var save = function(name, pop, dist, county, st) {
	
	// alert(e.rowData.name);
	// input = {};
	// input.name = name;
	// input.countryAB = countryAB;
	// input.latitude = latitude;
	// input.longitude = longitude;
	// geo.execute('INSERT INTO location (name, population, lat, lng, dist, county) VALUES (?, ?, ?, ?, ?, ?)', input.name, input.countryAB, input.latitude, input.longitude);
	// geoData;
	dataB.execute("INSERT INTO location(name,state,county,latitude,longitude,distance,population) VALUES (?,?,?,?,?,?,?)", name, st, county, latitude, longitude, dist, pop);
		alert(name + " has been added to your favorites list");
};
exports.save = save;
//saving data from app.js end


// var id = a.rowData.id;
// 
// geo.execute('SELECT * FROM location WHERE ID=?', id);
// input = {};


//delete data start
function delFunc() {
	geo.execute('DELETE FROM location WHERE id=?', id); 
	// seclist.setItems(geoData);
};
exports.delFunc = delFunc;
//delete data end