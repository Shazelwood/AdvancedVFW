(function() { 
	// load the Cloud Module
	var Cloud = require('ti.cloud');
	// set .debug property to 'true' as we are in Development mode
	Cloud.debug = true;
	var loginUser = function(){
		Cloud.Users.login({
			login: 'com.fullsail.demoApp',
			password: '12345'
		}, function(e){
			// use .info method to view login info in the Console, if successful
			if (e.success){
				var user = e.users[0];
				Ti.API.info('Success!\n' + 
					'ACS User ID: ' + user.id + '\n' + 
					'ACS App sessionId: ' + Cloud.sessionId + '\n' + 
					'ACS App Username: ' + user.username);
			} else {
				alert((e.error && e.message) || JSON.stringify(e));
			}
		});
	}; // loginUser ends
	loginUser();
	// now your app is ready to access ACS network and data services
})();

var win = Ti.UI.createWindow({
	title: "Users",
	backgroundColor: "#FFF",
});

var cam = Ti.UI.createButton({
	text: "Camera"
});

cam.addEventListener("click", function(){
	Ti.Media.showCamera({
	success:function(event){
		
		Ti.API.debug('Our type was:' + event.mediaType);
		if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO){
			var imageView = Ti.UI.createImageView({
				width:win.width,
				height: win.height,
				image: event.media
			});
			win.add(imageView);
		}else{
			alert("got the wrong type back = " + event.mediaType);
		}
	},
	cancel: function(){
		
	},
	error:function(error){
		
		var a = Ti.UI.createAlertDialog({
			title:'Camera'
		});
		if (error.code == Ti.Media.NO_CAMERA){
			a.setMessage('Please run this test on device');
		}else{
			a.setMessage('Unexpected error: ' + error.code);
		}
		a,show();
	},
	saveToPhotoGallery:true,
	allowEditing:true,
	mediaTypes:[Ti.Media.MEDIA_TYPE_VIDEO, Ti.Media.MEDIA_TYPE_PHOTO]
});
	
});

win.add(camera);

win.open();
