//Window Start
var favWin = Ti.UI.createWindow({
	title : 'Stored',
	backgroundColor : '#fff'
});
exports.favWin = favWin;
//Window End

var dataB = Ti.Database.open("GeoDB");
dataB.execute('CREATE TABLE IF NOT EXISTS location(id INTEGER PRIMARY KEY, name TEXT, population TEXT, longitude INTEGER, latitude INTEGER, distance TEXT, county TEXT, state TEXT)');

var buildRow = function () {
	var data = [];
	var test = dataB.execute("SELECT * FROM location");
	
	while (test.isValidRow()) {
		var name = test.fieldByName('name');
		var state = test.fieldByName('state');
		var county = test.fieldByName('county');
		var latitude = test.fieldByName('latitude');
		var longitude = test.fieldByName('longitude');
		var distance = test.fieldByName('distance');
		var population = test.fieldByName('population');
		var id = test.fieldByName('id');

		data.push({
			name : name,
			state : state,
			county : county,
			latitude : latitude,
			longitude : longitude,
			distance : distance,
			population: population,
			id : id
		});
		test.next();
	};
	return data;
};

//saving data from app.js start
var save = function(name, pop, dist, county, st) {
	
	// alert(e.rowData.name);
	// input = {};
	// input.name = name;
	// input.countryAB = countryAB;
	// input.latitude = latitude;
	// input.longitude = longitude;
	// geo.execute('INSERT INTO location (name, population, lat, lng, dist, county) VALUES (?, ?, ?, ?, ?, ?)', input.name, input.countryAB, input.latitude, input.longitude);
	// geoData;
	dataB.execute("INSERT INTO location(name,state,county,latitude,longitude,distance,population) VALUES (?,?,?,?,?,?,?)", name, st, county, latitude, longitude, dist, pop);
	alert(name + " has been added to your favorites list");
};
exports.save = save;
//saving data from app.js end

////////////////////////////////////// Prompt //////////////////////////////////////
var promptHolder = Ti.UI.createView({
	width: Ti.UI.FIIL,
	height: Ti.UI.FILL,
	backgroundColor: "black",
	opacity: 0.8
});
var prompt = Ti.UI.createView({
	backgroundColor: "#FFF",
	width: 200,
	height: 100,
	borderRadius: 20
});

//Delete button
var button1 = Ti.UI.createButton({
	title: "Delete",
	right: 20,
	bottom: 20
});

//Cancel (closes the prompt)
var button3 = Ti.UI.createButton({
	title: "cancel",
	bottom: 5
});
var label = Ti.UI.createLabel({
	text: "What would you like to do?",
	font: {fontSize: 14},
	top: 20
});

prompt.add(button1, button3, label);
prompt.visible = false;
promptHolder.visible = false;
favWin.add(promptHolder, prompt);
////////////////////////////////////// Prompt //////////////////////////////////////
// var table = Ti.UI.createTableView();
// 
// 
// favWin.add(table);
