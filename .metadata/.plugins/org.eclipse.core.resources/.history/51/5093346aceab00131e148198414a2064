var currentWin = Ti.UI.currentWindow;
var Cloud = require('ti.cloud');

var holder = Ti.UI.createScrollView({
	backgroundColor: "red",
	top: 100,
	bottom: 0,
	width: Ti.FILL,
	layout: "horizontal",
	contentWidth: Ti.Platform.displayCaps.platformWidth
});

// var cam = Ti.UI.createButton({
	// title: "Camera",
	// top: 20
// });
// var images = [];
// 
// cam.addEventListener("click", function(){
// 	
	// Ti.Media.showCamera({	
		// success:function(event){
// 			
			// Ti.API.debug('Our type was:' + event.mediaType);
			// if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO){
				// var imageView = Ti.UI.createImageView({
					// width: win.width,
					// height: win.height,
					// image: event.media
				// });
				// images.push(imageView);
				// for(i = 0; i < images.length; i++){
					// var views = Ti.UI.createView({
						// height: 200,
						// width: 200,
						// top: 20,
						// left:20,
						// backgroundColor: "red"
					// });
				// }
				// views.add(imageView);
				// holder.add(views);
			// }else{
				// alert("got the wrong type back = " + event.mediaType);
			// }
		// },
		// cancel: function(){
// 			
		// },
		// error:function(error){
// 			
			// var a = Ti.UI.createAlertDialog({
				// title:'Camera'
			// });
			// if (error.code == Ti.Media.NO_CAMERA){
				// a.setMessage('Please run this test on device');
			// }else{
				// a.setMessage('Unexpected error: ' + error.code);
			// }
			// a.show();
		// },
		// saveToPhotoGallery:true,
		// allowEditing:true,
		// mediaTypes:[Ti.Media.MEDIA_TYPE_VIDEO, Ti.Media.MEDIA_TYPE_PHOTO]
	// });
// 		
// });
var tableData = [];
var table = Ti.UI.createTableView();
holder.addEventListener("click", function(){
	Cloud.Users.query({
	    page: 1,
	    per_page: 10,
	}, function (e) {
	    if (e.success) {
	        alert('Success:\n' +
	            'Count: ' + e.users.length);
	        for (var i = 0; i < e.users.length; i++) {
	            var user = e.users[i];
	            for (var i = 0; i <= 20; i++){
			 
	            var row = Ti.UI.createView({
	            	backgroundColor: "red",
	            	left: 30,
	            	right: 30,
	            	top:10,	            	
	            });
	            var label = Ti.UI.createLabel({
	            	text: user.first_name
	            });
	            row.add(label);
	            
	            alert('id: ' + user.id + '\n' +
	                'first name: ' + user.first_name + '\n' +
	                'last name: ' + user.last_name);
	                tableData.push(row);
	         	}
	         }
	    } else {
	        alert('Error:\n' +
	            ((e.error && e.message) || JSON.stringify(e)));
	    }
	   table.setData(tableData);
	});
});


currentWin.add(holder);
//currentWin.add(cam);